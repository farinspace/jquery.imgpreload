if("undefined"!=typeof jQuery){(function($){$.imgpreload=function(imgs,settings){var deferred=$.Deferred();settings=$.extend({},$.fn.imgpreload.defaults,settings instanceof Function?{all:settings}:settings);if("string"==typeof imgs){imgs=new Array(imgs)}var loaded=new Array;$.each(imgs,function(i,elem){var img=new Image;var url=elem;var img_obj=img;if("string"!=typeof elem){url=$(elem).attr("src")||$(elem).css("background-image").replace(/^url\((?:"|')?(.*)(?:'|")?\)$/gm,"$1");img_obj=elem}$(img).bind("load error",function(e){loaded.push(img_obj);$.data(img_obj,"loaded","error"==e.type?false:true);if(settings.each instanceof Function){settings.each.call(img_obj)}if(deferred.notifyWith instanceof Function){deferred.notify(img_obj)}if(loaded.length>=imgs.length){if(settings.all instanceof Function){settings.all.call(loaded)}deferred.resolve(loaded)}$(this).unbind("load error")});img.src=url});return deferred.promise()};$.fn.imgpreload=function(settings){$.imgpreload(this,settings);return this};$.fn.imgpreload.defaults={each:null,all:null}})(jQuery)}